import{j as e}from"./index-596hYXym.js";import{r as s}from"./router-BRn4_cjy.js";import{h as t,R as a,ap as l,s as i,j as r,X as n,aD as c}from"./ui-TmEHN81D.js";import"./vendor-DtuzQOD1.js";function d(){const[d,o]=s.useState(null),[x,h]=s.useState(!0);s.useEffect(()=>{(async()=>{try{o({applications:[]})}catch(e){console.error("Failed to fetch Five-Fold applications:",e)}finally{h(!1)}})()},[g]);const[m,p]=s.useState({}),[g,j]=s.useState(!1),u=async(e,s)=>{try{const t=m[e]||"";if(!(await fetch(`/api/fivefold/applications/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:s,notes:t})})).ok)throw new Error("Failed to update");alert(`Application ${s} successfully!`),p(s=>({...s,[e]:""}))}catch(t){console.error("Failed to update application:",t),alert("Failed to update application. Please try again.")}},y=x;return e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{className:"h-5 w-5 text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white heading-font",children:"Five-Fold Ministry Applications"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage five-fold ministry training applications."})]})]}),e.jsxs("button",{onClick:async()=>{j(!0),setTimeout(()=>j(!1),1e3)},disabled:g,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white px-3 py-2 flex items-center gap-2 disabled:opacity-50 text-sm",children:[e.jsx(a,{className:"w-4 h-4 "+(g?"animate-spin":"")}),"Refresh"]})]}),y?e.jsx("p",{className:"text-gray-400",children:"Loading five-fold applications..."}):d&&0!==d.length?e.jsx("div",{className:"space-y-4",children:d.map(s=>e.jsx("div",{className:"bg-gray-700/50 border border-gray-600 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(l,{className:"h-5 w-5 text-purple-400"}),e.jsx("h3",{className:"text-white font-semibold",children:s.churchName}),e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded "+("pending"===s.status?"bg-yellow-500/20 text-yellow-400":"approved"===s.status?"bg-green-500/20 text-green-400":"contacted"===s.status?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"),children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Pastor:"})," ",s.pastorName]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Email:"})," ",s.email]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Phone:"})," ",s.phone]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Location:"})," ",s.location]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Denomination:"})," ",s.denomination]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Congregation Size:"})," ",s.congregationSize]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"How they heard:"})," ",s.hearAboutUs]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-gray-300",children:e.jsx("strong",{children:"Current Challenges:"})}),e.jsx("p",{className:"text-gray-400 text-sm ml-4",children:s.currentChallenges})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-gray-300",children:e.jsx("strong",{children:"Goals:"})}),e.jsx("p",{className:"text-gray-400 text-sm ml-4",children:s.goals})]}),s.notes&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-gray-300",children:e.jsx("strong",{children:"Admin Notes:"})}),e.jsx("p",{className:"text-gray-400 text-sm ml-4",children:s.notes})]}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Submitted: ",new Date(s.submittedAt).toLocaleDateString()]})]}),"pending"===s.status&&e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>u(s._id,"approved"),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 text-sm rounded",title:"Approve",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(s._id,"contacted"),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 text-sm rounded",title:"Contact",children:e.jsx(r,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(s._id,"rejected"),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 text-sm rounded",title:"Reject",children:e.jsx(n,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Add notes...",value:m[s._id]||"",onChange:e=>p(t=>({...t,[s._id]:e.target.value})),className:"bg-gray-600 border border-gray-500 text-white px-2 py-1 text-sm flex-1"}),e.jsx("button",{onClick:()=>u(s._id,s.status),className:"bg-gray-500 hover:bg-gray-600 text-white px-2 py-1 text-sm rounded",title:"Update Notes",children:e.jsx(c,{className:"h-4 w-4"})})]})]})]})},s._id))}):e.jsx("p",{className:"text-gray-400",children:"No five-fold applications found."})]})}export{d as default};
