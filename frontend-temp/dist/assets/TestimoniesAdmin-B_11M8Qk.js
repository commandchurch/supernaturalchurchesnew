import{j as e}from"./index-596hYXym.js";import{r as s}from"./router-BRn4_cjy.js";import{c as t}from"./client-B_jBfuGE.js";import{J as a,a9 as r,s as l,X as i,j as n}from"./ui-TmEHN81D.js";import"./vendor-DtuzQOD1.js";function c(){const[c,d]=s.useState(null),[o,x]=s.useState(!0),[m,h]=s.useState(null);s.useEffect(()=>{(async()=>{try{const e=await t.church.listTestimoniesAdmin();d(e)}catch(e){console.error("Failed to fetch testimonies:",e)}finally{x(!1)}})()},[]);const p=async(e,s)=>{try{h(e),await t.church.reviewTestimony({id:parseInt(e),approve:s,reviewerId:"admin",notes:""});const a=await t.church.listTestimoniesAdmin();d(a),h(null)}catch(a){console.error("Review failed:",a),h(null)}};return e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(a,{className:"h-5 w-5 text-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white heading-font",children:"Manage Testimonies"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Review and approve user-submitted testimonies."})]})]}),o?e.jsx("p",{className:"text-gray-400",children:"Loading testimonies..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-400 font-semibold py-3 px-3",children:"User ID"}),e.jsx("th",{className:"text-left text-gray-400 font-semibold py-3 px-3",children:"Content"}),e.jsx("th",{className:"text-left text-gray-400 font-semibold py-3 px-3",children:"Status"}),e.jsx("th",{className:"text-left text-gray-400 font-semibold py-3 px-3",children:"Actions"})]})}),e.jsx("tbody",{children:null==c?void 0:c.testimonies.map(s=>e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("td",{className:"py-3 px-3 text-white",children:s.userId}),e.jsxs("td",{className:"py-3 px-3 text-gray-300 max-w-md",children:[s.contentText&&e.jsx("p",{className:"truncate",children:s.contentText}),s.videoUrl&&e.jsxs("a",{href:s.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline inline-flex items-center gap-1",children:[e.jsx(r,{className:"h-4 w-4"})," View Video"]})]}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold "+("approved"===s.status?"bg-green-500/20 text-green-400":"pending"===s.status?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"),children:s.status.toUpperCase()})}),e.jsx("td",{className:"py-3 px-3",children:"pending"===s.status?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(s.id,!0),className:"text-green-400 hover:text-green-300",title:"Approve",disabled:m===s.id,children:e.jsx(l,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>p(s.id,!1),className:"text-red-400 hover:text-red-300",title:"Reject",disabled:m===s.id,children:e.jsx(i,{className:"h-5 w-5"})})]}):e.jsxs("div",{className:"text-gray-500 inline-flex items-center gap-1",children:[e.jsx(n,{className:"h-4 w-4"})," Reviewed"]})})]},s.id))})]})})]})}export{c as default};
